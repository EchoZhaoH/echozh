{"version":3,"sources":["components/entry/index.tsx","assets/images/github-log.png","App.tsx","hooks/useWebGL.ts","hooks/useFetch.ts","api/index.ts","components/archive/index.tsx","components/article/index.tsx","components/header/index.tsx","components/back-entry/index.tsx","assets/images/stage-1.jpeg","components/v-world/index.tsx","common/mv.js","common/shader.ts","components/webgl/class1/demo1/index.tsx","components/webgl/class1/demo2/index.tsx","components/webgl/class1/demo3/index.tsx","components/webgl/class1/demo4/index.tsx","data/webgl-class.ts","components/webgl/classes/index.tsx","route.tsx","hooks/useDark.ts","index.tsx","components/webgl/class1/demo1/shader.vert","components/webgl/class1/demo1/shader.frag","components/webgl/class1/demo2/shader.vert","components/webgl/class1/demo2/shader.frag","components/webgl/class1/demo3/shader.vert","components/webgl/class1/demo3/shader.frag","components/webgl/class1/demo4/shader.vert","components/webgl/class1/demo4/shader.frag"],"names":["Entry","className","as","options","cursor","to","src","App","useWebGL","ref","useState","gl","setGl","useEffect","canvas","current","getContext","viewport","width","height","clearColor","useGet","url","initData","opts","loading","setLoading","data","setData","input","option","fetch","then","res","status","ok","json","Error","catch","e","console","log","message","finally","fetching","Archive","skeleton","classNames","Classes","SKELETON","map","d","interactive","id","title","date","round","intent","Intent","PRIMARY","tag","body","Article","props","dangerouslySetInnerHTML","__html","Header","Group","align","Alignment","LEFT","Heading","RIGHT","minimal","icon","BackEntry","VWorld","useRef","el","scene","THREE","camera","window","innerWidth","innerHeight","renderer","setSize","appendChild","domElement","geometry","material","load","bgImg","cube","add","bgTexture","mapping","wrapS","wrapT","repeat","set","background","position","z","timer","animate","requestAnimationFrame","rotation","x","y","render","cancelAnimationFrame","_argumentsToArray","args","vec2","result","arguments","length","push","splice","vec3","vec4","mat2","v","m","matrix","mat3","mat4","u","i","j","transpose","mix","s","scale","Array","isArray","flatten","n","elemsAreArrays","floats","Float32Array","idx","byteLength","createShader","source","type","shader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","createProgram","shaders","program","forEach","attachShader","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","Sierpinski","pointsCount","Math","pow","numTimesDivide","vertices","points","divideTriangle","a","b","c","count","triangle","ab","ac","bc","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","init","vertex","VERTEX_SHADER","frag","FRAGMENT_SHADER","useProgram","vPosition","getAttribLocation","FLOAT","vertexAttribPointer","enableVertexAttribArray","loaderProgram","clear","COLOR_BUFFER_BIT","drawArrays","TRIANGLES","style","backgroundColor","p","floor","random","POINTS","colors","color","baseColor","tetra","ad","bd","cd","enable","DEPTH_TEST","cBuffer","vColor","DEPTH_BUFFER_BIT","WEBGLClasses","path","WEBGLClassesPage","cls","RoutesMap","listener","matches","document","classList","remove","media","matchMedia","addEventListener","removeEventListener","exact","component","Class1Demo4","Class1Demo3","Class1Demo2","Class1Demo1","match","params","ReactDOM","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.67f4712c.chunk.js","sourcesContent":["import { Link } from 'react-router-dom';\nimport githubLog from '@assets/images/github-log.png';\n\nimport './style.scss'\nimport { H4 } from '@blueprintjs/core';\nimport TypeIt from 'typeit-react';\n\nexport function Entry() {\n  return (\n    <div className=\"content flex-center-column fill-height\">\n      <TypeIt\n        as=\"div\"\n        options={{\n          cursor: false\n        } as any}\n      >\n        <div className=\"flex-center-column fill-height\">\n          <H4>Hi 我是 Echo</H4>\n          <p className=\"mgt-l mgl-l mgr-l\">一名前端但是不擅长前端的前端工程师，目前就职于 ZOOM。这是我的<Link to=\"https://github.com/EchoZhaoH\"><img src={githubLog} className=\"github-log\" />github</Link>，欢迎关注我。<br />\n          </p>\n        </div>\n      </TypeIt>\n    </div>\n  );\n}\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyQTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyQjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTI4OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTI5OTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+m4QGuQAAAyRJREFUeNrEl21ojWEYx895TDPbMNlBK46IUiNmPvHBSUjaqc0H8pF5+aDUKPEBqU2NhRQpX5Rv5jWlDIWlMCv7MMSWsWwmb3tpXub4XXWdPHvc9/Gc41nu+nedc7/8r/99PffLdYdDPsvkwsgkTBwsA/PADJCnzX2gHTwBt8Hl7p537/3whn04XoDZDcpBlk+9P8AFcAghzRkJwPF4zGGw0Y9QS0mAM2AnQj77FqCzrtcwB1Hk81SYojHK4DyGuQ6mhIIrBWB9Xm7ug/6B/nZrBHBegrkFxoVGpnwBMSLR9EcEcC4qb8pP14BWcBcUgewMnF3T34VqhWMFkThLJAalwnENOAKiHpJq1FZgI2AT6HZtuxZwR9GidSHtI30jOrbawxlVX78/AbNfhHlomEUJJI89O2MqeE79T8/nk8nMBm/dK576hZgmA3cp/R4l9/UeSxiHLVIlNm4nFfT0bxyuIj7LHRTKai+zdJobwMKzcZSJb0ePV5PKN+BqAAKE47UlMnERELMM3EdYP/yrd+XYb2mOiYBiQ8OQnoRBlXrl9JZix7D1pHTazu4MoyBcnYamqAjIMTR8G4FT8LuhLsexXYYjICBiqhQBvYb6fLZIJCjPypVvaOoVAW2WcasCnL2Nq82xHJNSqlCeFcDshaPK0twkAhosjZL31QYw+1rlMpWGMArl23SBsZZO58F2tlJXmjOXS+s4WGvpMiBJT/I2PInZ6lIs9/hBsNS1hS6BG0DSqmYEDRlCXQrmy50P1oDRKTSegmNbUsA0zDMwRhPJXeCE3vWLPQMvan6X8AgIa1vcR4AkGZkDR4ejJ1UHpsaVI0g2LInpOsNFUud1rhxSV+fzC9Woz2EZkWQuja7/B+jUrgtIMpy9YCW4n4K41YfzRneW5E1KJTe4B2Zq1Q5EHEtj4U3AfEzR5SVY4l7QYQPJdN2as7RKBF0BPZqqH4VgMAMBL8Byxr7y8zCZiDlnOcEKIPmUpgB5Z2ww5RdOiiRiNajUmWda5IG6WbhsyY2fx6m8gLcoJDJFkH219M3We1+cnda93pfycZpIJEL/s/wSYADmOAwAQgdpBAAAAABJRU5ErkJggg==\"","import React from 'react';\nimport { Entry } from '@components/entry';\n\nfunction App() {\n  return (\n    <Entry />\n  );\n}\n\nexport default App\n","import { RefObject, useEffect, useState } from \"react\";\n\nexport function useWebGL(ref: RefObject<HTMLCanvasElement>) {\n  const [gl, setGl] = useState<WebGLRenderingContext | null>(null)\n  useEffect(() => {\n    const canvas = ref.current\n    if (!canvas) {\n      return\n    }\n    const gl = canvas.getContext('webgl')\n    gl.viewport(0, 0, canvas.width, canvas.height)\n    gl.clearColor(1.0, 1.0, 1.0, 1.0)\n    setGl(gl)\n  }, [ref])\n  return gl\n}\n\n","import { request } from \"@/api\";\nimport { useEffect, useState } from \"react\";\n\nexport function useGet<T>(url: string, initData: T, opts?: RequestInit) {\n  const [ loading, setLoading ] = useState<boolean>(false)\n  const [data, setData] = useState<T>(initData)\n  useEffect(() => {\n    setLoading(true)\n    request<T>(url, opts).then((res: T) => {\n      setData(res)\n    }).finally(() => {\n      setLoading(false)\n    })\n  }, [url, opts])\n  return {\n    fetching: loading,\n    data\n  }\n}","export function request<T>(input: RequestInfo, option?: RequestInit) {\n  return fetch(input, option).then(res => {\n    const status = res.status\n    if (status === 200 && res.ok) {\n      return res.json() as Promise<T>\n    } else {\n      throw Error('request error')\n    }\n  }).catch(e => {\n    console.log(e.message)\n  })\n}\n","import { useGet } from \"@/hooks\"\nimport { ArticleOption } from \"@/types/article\"\nimport { Card, Classes, H5, Intent, Tag } from \"@blueprintjs/core\"\nimport classNames from \"classnames\"\nimport { Link } from \"react-router-dom\"\n\nimport \"./style.scss\"\n\nexport function Archive() {\n  const { fetching, data} = useGet<ArticleOption[]>('/articles/list.json', [])\n  const skeleton = classNames({ [Classes.SKELETON]: fetching })\n  return (\n    <div className={skeleton}>\n      {data.map(d => (\n        <Card interactive key={d.id} className=\"article-item\">\n          <Link to={`/articles/${d.id}`}>\n            <H5>{d.title}</H5>\n          </Link>\n          <div className=\"mgb-s\">{d.date}<Tag className=\"mgl-s\" round intent={Intent.PRIMARY}>{d.tag}</Tag></div>\n          <article>{d.body}</article>\n        </Card>\n      ))}\n    </div>\n  )\n}","import { RouterProps } from \"react-router-dom\"\nimport { ArticleOption } from \"@/types/article\"\nimport { Classes, H4, Intent, Tag } from \"@blueprintjs/core\"\nimport { useGet } from \"@/hooks\"\nimport classNames from \"classnames\"\n\ninterface ArticleProps extends RouterProps {\n  id: string;\n}\n\nexport function Article(props: ArticleProps) {\n  const { fetching, data } = useGet<ArticleOption>(`/articles/${props.id}.json`, {} as ArticleOption)\n  const skeleton = classNames({ [Classes.SKELETON]: fetching })\n  return (\n    <div className=\"article-container mgt-l\">\n      <H4 className={skeleton}>\n        {data.title}\n      </H4>\n      <div className={classNames(skeleton, 'mgt-s')}>\n        {!!data.tag && <Tag className=\"mgr-s\" round intent={Intent.PRIMARY}>{data.tag}</Tag>}\n        <span>{data.date}</span>\n      </div>\n      <article className={classNames(skeleton, 'mgt-l')} dangerouslySetInnerHTML={{ __html: data.body }}></article>\n    </div>\n  )\n}\n","import { Link } from 'react-router-dom'\nimport { Alignment, Button, Navbar } from \"@blueprintjs/core\";\n\nexport function Header() {\n  return (\n    <Navbar>\n      <Navbar.Group align={Alignment.LEFT}>\n        <Navbar.Heading>\n          <Link to=\"/\">Echo</Link>\n        </Navbar.Heading>\n      </Navbar.Group>\n      <Navbar.Group align={Alignment.RIGHT}>\n        <Button className=\"mgr-l\" minimal icon=\"archive\">\n          <Link to=\"/articles\">Archive</Link>\n        </Button>\n        <Button minimal icon=\"lab-test\">\n          <Link to=\"/webgl\">\n            WEBGL\n          </Link>\n        </Button>\n      </Navbar.Group>\n    </Navbar>\n  )\n}\n","import { Button, Icon } from \"@blueprintjs/core\";\nimport { Link } from 'react-router-dom'\n\nimport \"./style.scss\"\n\nexport function BackEntry () {\n  return (\n    <div className=\"back-entry\">\n      <Link to=\"/\">\n        <Button>\n          <Icon icon=\"undo\" />\n        </Button>\n      </Link>\n    </div>\n  )\n}","export default __webpack_public_path__ + \"static/media/stage-1.ea9dd4be.jpeg\";","import { useEffect, useRef } from 'react';\nimport * as THREE from 'three';\nimport { BackEntry } from '@components/back-entry'\n\nimport bgImg from '@assets/images/stage-1.jpeg';\n\nexport default function VWorld() {\n  const ref = useRef<HTMLDivElement>(null);\n\n  // 创建场景\n  useEffect(() => {\n    const el = ref.current;\n    if (!el) {\n      return;\n    }\n    const scene = new THREE.Scene();\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n    const renderer = new THREE.WebGLRenderer();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    el.appendChild(renderer.domElement);\n\n    const geometry = new THREE.SphereGeometry();\n    const material = new THREE.MeshBasicMaterial({\n      map: new THREE.TextureLoader().load(bgImg),\n    });\n    const cube = new THREE.Mesh(geometry, material);\n    scene.add(cube);\n    const bgTexture = new THREE.TextureLoader().load(bgImg);\n    bgTexture.mapping = THREE.CubeRefractionMapping;\n    bgTexture.wrapS = THREE.RepeatWrapping;\n    bgTexture.wrapT = THREE.RepeatWrapping;\n    bgTexture.repeat.set(1, 1);\n    scene.background = bgTexture;\n\n    camera.position.z = 5;\n    let timer: number | null = null;\n    const animate = function () {\n      timer = requestAnimationFrame(animate);\n\n      cube.rotation.x += 0.01;\n      cube.rotation.y += 0.01;\n\n      renderer.render(scene, camera);\n    };\n    animate();\n    return () => {\n      cancelAnimationFrame(timer);\n    };\n  }, []);\n  return (\n    <>\n      <div ref={ref} />\n      <BackEntry />\n    </>\n  );\n}\n","//////////////////////////////////////////////////////////////////////////////\n/*eslint-disable*/\n//\n//  Angel.js\n//\n//////////////////////////////////////////////////////////////////////////////\n\n//----------------------------------------------------------------------------\n//\n//  Helper export functions\n//\n\nexport function _argumentsToArray(args) {\n  return [...args];\n}\n\n//----------------------------------------------------------------------------\n\nexport function radians(degrees) {\n  return degrees * Math.PI / 180.0;\n}\n\n//----------------------------------------------------------------------------\n//\n//  Vector Constructors\n//\n\nexport function vec2() {\n  const result = _argumentsToArray(arguments);\n  switch (result.length) {\n    case 0: result.push(0.0);\n    case 1: result.push(0.0);\n  }\n  return result.splice(0, 2);\n}\n\nexport function vec3() {\n  const result = _argumentsToArray(arguments);\n\n  switch (result.length) {\n    case 0: result.push(0.0);\n    case 1: result.push(0.0);\n    case 2: result.push(0.0);\n  }\n\n  return result.splice(0, 3);\n}\n\nexport function vec4() {\n  const result = _argumentsToArray(arguments);\n\n  switch (result.length) {\n    case 0: result.push(0.0);\n    case 1: result.push(0.0);\n    case 2: result.push(0.0);\n    case 3: result.push(1.0);\n  }\n\n  return result.splice(0, 4);\n}\n\n//----------------------------------------------------------------------------\n//\n//  Matrix Constructors\n//\n\nexport function mat2() {\n  const v = _argumentsToArray(arguments);\n\n  let m = [];\n  switch (v.length) {\n    case 0:\n      v[0] = 1;\n    case 1:\n      m = [\n        vec2(v[0], 0.0),\n        vec2(0.0, v[0])\n      ];\n      break;\n\n    default:\n      m.push(vec2(v)); v.splice(0, 2);\n      m.push(vec2(v));\n      break;\n  }\n\n  m.matrix = true;\n\n  return m;\n}\n\n//----------------------------------------------------------------------------\n\nexport function mat3() {\n  const v = _argumentsToArray(arguments);\n\n  let m = [];\n  switch (v.length) {\n    case 0:\n      v[0] = 1;\n    case 1:\n      m = [\n        vec3(v[0], 0.0, 0.0),\n        vec3(0.0, v[0], 0.0),\n        vec3(0.0, 0.0, v[0])\n      ];\n      break;\n\n    default:\n      m.push(vec3(v)); v.splice(0, 3);\n      m.push(vec3(v)); v.splice(0, 3);\n      m.push(vec3(v));\n      break;\n  }\n\n  m.matrix = true;\n\n  return m;\n}\n\n//----------------------------------------------------------------------------\n\nexport function mat4() {\n  const v = _argumentsToArray(arguments);\n\n  let m = [];\n  switch (v.length) {\n    case 0:\n      v[0] = 1;\n    case 1:\n      m = [\n        vec4(v[0], 0.0, 0.0, 0.0),\n        vec4(0.0, v[0], 0.0, 0.0),\n        vec4(0.0, 0.0, v[0], 0.0),\n        vec4(0.0, 0.0, 0.0, v[0])\n      ];\n      break;\n\n    default:\n      m.push(vec4(v)); v.splice(0, 4);\n      m.push(vec4(v)); v.splice(0, 4);\n      m.push(vec4(v)); v.splice(0, 4);\n      m.push(vec4(v));\n      break;\n  }\n\n  m.matrix = true;\n\n  return m;\n}\n\n//----------------------------------------------------------------------------\n//\n//  Generic Mathematical Operations for Vectors and Matrices\n//\n\nexport function equal(u, v) {\n  if (u.length != v.length) { return false; }\n\n  if (u.matrix && v.matrix) {\n    for (var i = 0; i < u.length; ++i) {\n      if (u[i].length != v[i].length) { return false; }\n      for (let j = 0; j < u[i].length; ++j) {\n        if (u[i][j] !== v[i][j]) { return false; }\n      }\n    }\n  }\n  else if (u.matrix && !v.matrix || !u.matrix && v.matrix) {\n    return false;\n  }\n  else {\n    for (var i = 0; i < u.length; ++i) {\n      if (u[i] !== v[i]) { return false; }\n    }\n  }\n\n  return true;\n}\n\n//----------------------------------------------------------------------------\n\nexport function add(u, v) {\n  const result = [];\n\n  if (u.matrix && v.matrix) {\n    if (u.length != v.length) {\n      throw \"add(): trying to add matrices of different dimensions\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      if (u[i].length != v[i].length) {\n        throw \"add(): trying to add matrices of different dimensions\";\n      }\n      result.push([]);\n      for (let j = 0; j < u[i].length; ++j) {\n        result[i].push(u[i][j] + v[i][j]);\n      }\n    }\n\n    result.matrix = true;\n\n    return result;\n  }\n  else if (u.matrix && !v.matrix || !u.matrix && v.matrix) {\n    throw \"add(): trying to add matrix and non-matrix variables\";\n  }\n  else {\n    if (u.length != v.length) {\n      throw \"add(): vectors are not the same dimension\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      result.push(u[i] + v[i]);\n    }\n\n    return result;\n  }\n}\n\n//----------------------------------------------------------------------------\n\nexport function subtract(u, v) {\n  const result = [];\n\n  if (u.matrix && v.matrix) {\n    if (u.length != v.length) {\n      throw \"subtract(): trying to subtract matrices\" +\n      \" of different dimensions\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      if (u[i].length != v[i].length) {\n        throw \"subtract(): trying to subtact matrices\" +\n        \" of different dimensions\";\n      }\n      result.push([]);\n      for (let j = 0; j < u[i].length; ++j) {\n        result[i].push(u[i][j] - v[i][j]);\n      }\n    }\n\n    result.matrix = true;\n\n    return result;\n  }\n  else if (u.matrix && !v.matrix || !u.matrix && v.matrix) {\n    throw \"subtact(): trying to subtact  matrix and non-matrix variables\";\n  }\n  else {\n    if (u.length != v.length) {\n      throw \"subtract(): vectors are not the same length\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      result.push(u[i] - v[i]);\n    }\n\n    return result;\n  }\n}\n\n//----------------------------------------------------------------------------\n\nexport function mult(u, v) {\n  const result = [];\n\n  if (u.matrix && v.matrix) {\n    if (u.length != v.length) {\n      throw \"mult(): trying to add matrices of different dimensions\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      if (u[i].length != v[i].length) {\n        throw \"mult(): trying to add matrices of different dimensions\";\n      }\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      result.push([]);\n\n      for (var j = 0; j < v.length; ++j) {\n        var sum = 0.0;\n        for (let k = 0; k < u.length; ++k) {\n          sum += u[i][k] * v[k][j];\n        }\n        result[i].push(sum);\n      }\n    }\n\n    result.matrix = true;\n\n    return result;\n  }\n\n  if (u.matrix && (u.length == v.length)) {\n    for (var i = 0; i < v.length; i++) {\n      var sum = 0.0;\n      for (var j = 0; j < v.length; j++) {\n        sum += u[i][j] * v[j];\n      }\n      result.push(sum);\n    }\n    return result;\n  }\n\n\n\n  else {\n    if (u.length != v.length) {\n      throw \"mult(): vectors are not the same dimension\";\n    }\n\n    for (var i = 0; i < u.length; ++i) {\n      result.push(u[i] * v[i]);\n    }\n\n    return result;\n  }\n}\n\n//----------------------------------------------------------------------------\n//\n//  Basic Transformation Matrix Generators\n//\n\nexport function translate(x, y, z) {\n  if (Array.isArray(x) && x.length == 3) {\n    z = x[2];\n    y = x[1];\n    x = x[0];\n  }\n\n  const result = mat4();\n  result[0][3] = x;\n  result[1][3] = y;\n  result[2][3] = z;\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n\nexport function rotate(angle, axis) {\n  if (!Array.isArray(axis)) {\n    axis = [arguments[1], arguments[2], arguments[3]];\n  }\n\n  const v = normalize(axis);\n\n  const x = v[0];\n  const y = v[1];\n  const z = v[2];\n\n  const c = Math.cos(radians(angle));\n  const omc = 1.0 - c;\n  const s = Math.sin(radians(angle));\n\n  const result = mat4(\n    vec4(x * x * omc + c, x * y * omc - z * s, x * z * omc + y * s, 0.0),\n    vec4(x * y * omc + z * s, y * y * omc + c, y * z * omc - x * s, 0.0),\n    vec4(x * z * omc - y * s, y * z * omc + x * s, z * z * omc + c, 0.0),\n    vec4()\n  );\n\n  return result;\n}\n\nexport function rotateX(theta) {\n  const c = Math.cos(radians(theta));\n  const s = Math.sin(radians(theta));\n  const rx = mat4(1.0, 0.0, 0.0, 0.0,\n    0.0, c, -s, 0.0,\n    0.0, s, c, 0.0,\n    0.0, 0.0, 0.0, 1.0);\n  return rx;\n}\nexport function rotateY(theta) {\n  const c = Math.cos(radians(theta));\n  const s = Math.sin(radians(theta));\n  const ry = mat4(c, 0.0, s, 0.0,\n    0.0, 1.0, 0.0, 0.0,\n    -s, 0.0, c, 0.0,\n    0.0, 0.0, 0.0, 1.0);\n  return ry;\n}\nexport function rotateZ(theta) {\n  const c = Math.cos(radians(theta));\n  const s = Math.sin(radians(theta));\n  const rz = mat4(c, -s, 0.0, 0.0,\n    s, c, 0.0, 0.0,\n    0.0, 0.0, 1.0, 0.0,\n    0.0, 0.0, 0.0, 1.0);\n  return rz;\n}\n\n\n//----------------------------------------------------------------------------\n\nexport function scalem(x, y, z) {\n  if (Array.isArray(x) && x.length == 3) {\n    z = x[2];\n    y = x[1];\n    x = x[0];\n  }\n\n  const result = mat4();\n  result[0][0] = x;\n  result[1][1] = y;\n  result[2][2] = z;\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n//  ModelView Matrix Generators\n//\n\nexport function lookAt(eye, at, up) {\n  if (!Array.isArray(eye) || eye.length != 3) {\n    throw \"lookAt(): first parameter [eye] must be an a vec3\";\n  }\n\n  if (!Array.isArray(at) || at.length != 3) {\n    throw \"lookAt(): first parameter [at] must be an a vec3\";\n  }\n\n  if (!Array.isArray(up) || up.length != 3) {\n    throw \"lookAt(): first parameter [up] must be an a vec3\";\n  }\n\n  if (equal(eye, at)) {\n    return mat4();\n  }\n\n  let v = normalize(subtract(at, eye));  // view direction vector\n  const n = normalize(cross(v, up));       // perpendicular vector\n  const u = normalize(cross(n, v));        // \"new\" up vector\n\n  v = negate(v);\n\n  const result = mat4(\n    vec4(n, -dot(n, eye)),\n    vec4(u, -dot(u, eye)),\n    vec4(v, -dot(v, eye)),\n    vec4()\n  );\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n//  Projection Matrix Generators\n//\n\nexport function ortho(left, right, bottom, top, near, far) {\n  if (left == right) { throw \"ortho(): left and right are equal\"; }\n  if (bottom == top) { throw \"ortho(): bottom and top are equal\"; }\n  if (near == far) { throw \"ortho(): near and far are equal\"; }\n\n  const w = right - left;\n  const h = top - bottom;\n  const d = far - near;\n\n  const result = mat4();\n  result[0][0] = 2.0 / w;\n  result[1][1] = 2.0 / h;\n  result[2][2] = -2.0 / d;\n  result[0][3] = -(left + right) / w;\n  result[1][3] = -(top + bottom) / h;\n  result[2][3] = -(near + far) / d;\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n\nexport function perspective(fovy, aspect, near, far) {\n  const f = 1.0 / Math.tan(radians(fovy) / 2);\n  const d = far - near;\n\n  const result = mat4();\n  result[0][0] = f / aspect;\n  result[1][1] = f;\n  result[2][2] = -(near + far) / d;\n  result[2][3] = -2 * near * far / d;\n  result[3][2] = -1;\n  result[3][3] = 0.0;\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n//  Matrix export functions\n//\n\nexport function transpose(m) {\n  if (!m.matrix) {\n    return \"transpose(): trying to transpose a non-matrix\";\n  }\n\n  const result = [];\n  for (let i = 0; i < m.length; ++i) {\n    result.push([]);\n    for (let j = 0; j < m[i].length; ++j) {\n      result[i].push(m[j][i]);\n    }\n  }\n\n  result.matrix = true;\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n//  Vector export functions\n//\n\nexport function dot(u, v) {\n  if (u.length != v.length) {\n    throw \"dot(): vectors are not the same dimension\";\n  }\n\n  let sum = 0.0;\n  for (let i = 0; i < u.length; ++i) {\n    sum += u[i] * v[i];\n  }\n\n  return sum;\n}\n\n//----------------------------------------------------------------------------\n\nexport function negate(u) {\n  const result = [];\n  for (let i = 0; i < u.length; ++i) {\n    result.push(-u[i]);\n  }\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n\nexport function cross(u, v) {\n  if (!Array.isArray(u) || u.length < 3) {\n    throw \"cross(): first argument is not a vector of at least 3\";\n  }\n\n  if (!Array.isArray(v) || v.length < 3) {\n    throw \"cross(): second argument is not a vector of at least 3\";\n  }\n\n  const result = [\n    u[1] * v[2] - u[2] * v[1],\n    u[2] * v[0] - u[0] * v[2],\n    u[0] * v[1] - u[1] * v[0]\n  ];\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n\nexport function length(u) {\n  return Math.sqrt(dot(u, u));\n}\n\n//----------------------------------------------------------------------------\n\nexport function normalize(u, excludeLastComponent) {\n  if (excludeLastComponent) {\n    var last = u.pop();\n  }\n\n  const len = length(u);\n\n  if (!isFinite(len)) {\n    throw \"normalize: vector \" + u + \" has zero length\";\n  }\n\n  for (let i = 0; i < u.length; ++i) {\n    u[i] /= len;\n  }\n\n  if (excludeLastComponent) {\n    u.push(last);\n  }\n\n  return u;\n}\n\n//----------------------------------------------------------------------------\n\nexport function mix(u, v, s) {\n  if (typeof s !== \"number\") {\n    throw \"mix: the last paramter \" + s + \" must be a number\";\n  }\n\n  if (u.length != v.length) {\n    throw \"vector dimension mismatch\";\n  }\n\n  const result = [];\n  for (let i = 0; i < u.length; ++i) {\n    result.push((1.0 - s) * u[i] + s * v[i]);\n  }\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n// Vector and Matrix export functions\n//\n\nexport function scale(s, u) {\n  if (!Array.isArray(u)) {\n    throw \"scale: second parameter \" + u + \" is not a vector\";\n  }\n\n  const result = [];\n  for (let i = 0; i < u.length; ++i) {\n    result.push(s * u[i]);\n  }\n\n  return result;\n}\n\n//----------------------------------------------------------------------------\n//\n//\n//\n\nexport function flatten(v) {\n  if (v.matrix === true) {\n    v = transpose(v);\n  }\n\n  let n = v.length;\n  let elemsAreArrays = false;\n\n  if (Array.isArray(v[0])) {\n    elemsAreArrays = true;\n    n *= v[0].length;\n  }\n\n  const floats = new Float32Array(n);\n\n  if (elemsAreArrays) {\n    let idx = 0;\n    for (var i = 0; i < v.length; ++i) {\n      for (let j = 0; j < v[i].length; ++j) {\n        floats[idx++] = v[i][j];\n      }\n    }\n  }\n  else {\n    for (var i = 0; i < v.length; ++i) {\n      floats[i] = v[i];\n    }\n  }\n\n  return floats;\n}\n\n//----------------------------------------------------------------------------\n\nexport const sizeof = {\n  'vec2': new Float32Array(flatten(vec2())).byteLength,\n  'vec3': new Float32Array(flatten(vec3())).byteLength,\n  'vec4': new Float32Array(flatten(vec4())).byteLength,\n  'mat2': new Float32Array(flatten(mat2())).byteLength,\n  'mat3': new Float32Array(flatten(mat3())).byteLength,\n  'mat4': new Float32Array(flatten(mat4())).byteLength\n};\n\n// new export functions 5/2/2015\n\n// printing\n\nexport function printm(m) {\n  if (m.length == 2)\n    for (var i = 0; i < m.length; i++)\n      console.log(m[i][0], m[i][1]);\n  else if (m.length == 3)\n    for (var i = 0; i < m.length; i++)\n      console.log(m[i][0], m[i][1], m[i][2]);\n  else if (m.length == 4)\n    for (var i = 0; i < m.length; i++)\n      console.log(m[i][0], m[i][1], m[i][2], m[i][3]);\n}\n// determinants\n\nexport function det2(m) {\n\n  return m[0][0] * m[1][1] - m[0][1] * m[1][0];\n\n}\n\nexport function det3(m) {\n  const d = m[0][0] * m[1][1] * m[2][2]\n    + m[0][1] * m[1][2] * m[2][0]\n    + m[0][2] * m[2][1] * m[1][0]\n    - m[2][0] * m[1][1] * m[0][2]\n    - m[1][0] * m[0][1] * m[2][2]\n    - m[0][0] * m[1][2] * m[2][1]\n    ;\n  return d;\n}\n\nexport function det4(m) {\n  const m0 = [\n    vec3(m[1][1], m[1][2], m[1][3]),\n    vec3(m[2][1], m[2][2], m[2][3]),\n    vec3(m[3][1], m[3][2], m[3][3])\n  ];\n  const m1 = [\n    vec3(m[1][0], m[1][2], m[1][3]),\n    vec3(m[2][0], m[2][2], m[2][3]),\n    vec3(m[3][0], m[3][2], m[3][3])\n  ];\n  const m2 = [\n    vec3(m[1][0], m[1][1], m[1][3]),\n    vec3(m[2][0], m[2][1], m[2][3]),\n    vec3(m[3][0], m[3][1], m[3][3])\n  ];\n  const m3 = [\n    vec3(m[1][0], m[1][1], m[1][2]),\n    vec3(m[2][0], m[2][1], m[2][2]),\n    vec3(m[3][0], m[3][1], m[3][2])\n  ];\n  return m[0][0] * det3(m0) - m[0][1] * det3(m1)\n    + m[0][2] * det3(m2) - m[0][3] * det3(m3);\n\n}\n\nexport function det(m) {\n  if (m.matrix != true) console.log(\"not a matrix\");\n  if (m.length == 2) return det2(m);\n  if (m.length == 3) return det3(m);\n  if (m.length == 4) return det4(m);\n}\n\n//---------------------------------------------------------\n\n// inverses\n\nexport function inverse2(m) {\n  const a = mat2();\n  const d = det2(m);\n  a[0][0] = m[1][1] / d;\n  a[0][1] = -m[0][1] / d;\n  a[1][0] = -m[1][0] / d;\n  a[1][1] = m[0][0] / d;\n  a.matrix = true;\n  return a;\n}\n\nexport function inverse3(m) {\n  const a = mat3();\n  const d = det3(m);\n\n  const a00 = [\n    vec2(m[1][1], m[1][2]),\n    vec2(m[2][1], m[2][2])\n  ];\n  const a01 = [\n    vec2(m[1][0], m[1][2]),\n    vec2(m[2][0], m[2][2])\n  ];\n  const a02 = [\n    vec2(m[1][0], m[1][1]),\n    vec2(m[2][0], m[2][1])\n  ];\n  const a10 = [\n    vec2(m[0][1], m[0][2]),\n    vec2(m[2][1], m[2][2])\n  ];\n  const a11 = [\n    vec2(m[0][0], m[0][2]),\n    vec2(m[2][0], m[2][2])\n  ];\n  const a12 = [\n    vec2(m[0][0], m[0][1]),\n    vec2(m[2][0], m[2][1])\n  ];\n  const a20 = [\n    vec2(m[0][1], m[0][2]),\n    vec2(m[1][1], m[1][2])\n  ];\n  const a21 = [\n    vec2(m[0][0], m[0][2]),\n    vec2(m[1][0], m[1][2])\n  ];\n  const a22 = [\n    vec2(m[0][0], m[0][1]),\n    vec2(m[1][0], m[1][1])\n  ];\n\n  a[0][0] = det2(a00) / d;\n  a[0][1] = -det2(a10) / d;\n  a[0][2] = det2(a20) / d;\n  a[1][0] = -det2(a01) / d;\n  a[1][1] = det2(a11) / d;\n  a[1][2] = -det2(a21) / d;\n  a[2][0] = det2(a02) / d;\n  a[2][1] = -det2(a12) / d;\n  a[2][2] = det2(a22) / d;\n\n  return a;\n\n}\n\nexport function inverse4(m) {\n  const a = mat4();\n  const d = det4(m);\n\n  const a00 = [\n    vec3(m[1][1], m[1][2], m[1][3]),\n    vec3(m[2][1], m[2][2], m[2][3]),\n    vec3(m[3][1], m[3][2], m[3][3])\n  ];\n  const a01 = [\n    vec3(m[1][0], m[1][2], m[1][3]),\n    vec3(m[2][0], m[2][2], m[2][3]),\n    vec3(m[3][0], m[3][2], m[3][3])\n  ];\n  const a02 = [\n    vec3(m[1][0], m[1][1], m[1][3]),\n    vec3(m[2][0], m[2][1], m[2][3]),\n    vec3(m[3][0], m[3][1], m[3][3])\n  ];\n  const a03 = [\n    vec3(m[1][0], m[1][1], m[1][2]),\n    vec3(m[2][0], m[2][1], m[2][2]),\n    vec3(m[3][0], m[3][1], m[3][2])\n  ];\n  const a10 = [\n    vec3(m[0][1], m[0][2], m[0][3]),\n    vec3(m[2][1], m[2][2], m[2][3]),\n    vec3(m[3][1], m[3][2], m[3][3])\n  ];\n  const a11 = [\n    vec3(m[0][0], m[0][2], m[0][3]),\n    vec3(m[2][0], m[2][2], m[2][3]),\n    vec3(m[3][0], m[3][2], m[3][3])\n  ];\n  const a12 = [\n    vec3(m[0][0], m[0][1], m[0][3]),\n    vec3(m[2][0], m[2][1], m[2][3]),\n    vec3(m[3][0], m[3][1], m[3][3])\n  ];\n  const a13 = [\n    vec3(m[0][0], m[0][1], m[0][2]),\n    vec3(m[2][0], m[2][1], m[2][2]),\n    vec3(m[3][0], m[3][1], m[3][2])\n  ];\n  const a20 = [\n    vec3(m[0][1], m[0][2], m[0][3]),\n    vec3(m[1][1], m[1][2], m[1][3]),\n    vec3(m[3][1], m[3][2], m[3][3])\n  ];\n  const a21 = [\n    vec3(m[0][0], m[0][2], m[0][3]),\n    vec3(m[1][0], m[1][2], m[1][3]),\n    vec3(m[3][0], m[3][2], m[3][3])\n  ];\n  const a22 = [\n    vec3(m[0][0], m[0][1], m[0][3]),\n    vec3(m[1][0], m[1][1], m[1][3]),\n    vec3(m[3][0], m[3][1], m[3][3])\n  ];\n  const a23 = [\n    vec3(m[0][0], m[0][1], m[0][2]),\n    vec3(m[1][0], m[1][1], m[1][2]),\n    vec3(m[3][0], m[3][1], m[3][2])\n  ];\n\n  const a30 = [\n    vec3(m[0][1], m[0][2], m[0][3]),\n    vec3(m[1][1], m[1][2], m[1][3]),\n    vec3(m[2][1], m[2][2], m[2][3])\n  ];\n  const a31 = [\n    vec3(m[0][0], m[0][2], m[0][3]),\n    vec3(m[1][0], m[1][2], m[1][3]),\n    vec3(m[2][0], m[2][2], m[2][3])\n  ];\n  const a32 = [\n    vec3(m[0][0], m[0][1], m[0][3]),\n    vec3(m[1][0], m[1][1], m[1][3]),\n    vec3(m[2][0], m[2][1], m[2][3])\n  ];\n  const a33 = [\n    vec3(m[0][0], m[0][1], m[0][2]),\n    vec3(m[1][0], m[1][1], m[1][2]),\n    vec3(m[2][0], m[2][1], m[2][2])\n  ];\n\n\n\n  a[0][0] = det3(a00) / d;\n  a[0][1] = -det3(a10) / d;\n  a[0][2] = det3(a20) / d;\n  a[0][3] = -det3(a30) / d;\n  a[1][0] = -det3(a01) / d;\n  a[1][1] = det3(a11) / d;\n  a[1][2] = -det3(a21) / d;\n  a[1][3] = det3(a31) / d;\n  a[2][0] = det3(a02) / d;\n  a[2][1] = -det3(a12) / d;\n  a[2][2] = det3(a22) / d;\n  a[2][3] = -det3(a32) / d;\n  a[3][0] = -det3(a03) / d;\n  a[3][1] = det3(a13) / d;\n  a[3][2] = -det3(a23) / d;\n  a[3][3] = det3(a33) / d;\n\n  return a;\n}\nexport function inverse(m) {\n  if (m.matrix != true) console.log(\"not a matrix\");\n  if (m.length == 2) return inverse2(m);\n  if (m.length == 3) return inverse3(m);\n  if (m.length == 4) return inverse4(m);\n}\n\nexport function normalMatrix(m, flag) {\n  let a = mat4();\n  a = inverse(transpose(m));\n  if (flag != true) return a;\n  else {\n    const b = mat3();\n    for (let i = 0; i < 3; i++) for (let j = 0; j < 3; j++) b[i][j] = a[i][j];\n    return b;\n  }\n\n}","export function createShader(gl: WebGLRenderingContext, source: string, type: GLenum) {\n  const shader = gl.createShader(type)\n  gl.shaderSource(shader, source)\n  gl.compileShader(shader)\n  if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n    throw Error(`shader ${type} create failed, the error log is: ${gl.getShaderInfoLog(shader)}`)\n  }\n  return shader\n}\n\nexport function createProgram(gl: WebGLRenderingContext, shaders: WebGLShader[]) {\n  const program = gl.createProgram()\n  shaders.forEach(s => {\n    gl.attachShader(program, s)\n  })\n  gl.linkProgram(program)\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    throw Error(`shader program failed to link, the error log is: ${gl.getProgramInfoLog(program)}`)\n  }\n  return program\n}\n","import { flatten, mix, vec2 } from \"@/common/mv\";\nimport { createProgram, createShader } from \"@/common/shader\";\nimport { useWebGL } from \"@/hooks/useWebGL\";\nimport { useEffect, useRef } from \"react\"\nimport vertex from './shader.vert'\nimport frag from './shader.frag'\n\nexport function Sierpinski() {\n  const ref = useRef<HTMLCanvasElement>(null)\n  const gl = useWebGL(ref)\n  useEffect(() => {\n    if (!gl) {\n      return\n    }\n    const numTimesDivide = 5\n    const pointsCount = Math.pow(3, numTimesDivide + 1);\n    function init() {\n      const vertices = [\n        vec2(-1.0, -1.0),\n        vec2(0.0, 1.0),\n        vec2(1.0, -1.0)\n      ]\n      const points: number[][] = []\n\n      function triangle(a: number[], b: number[], c: number[]) {\n        points.push(a);\n        points.push(b)\n        points.push(c)\n      }\n\n      function divideTriangle(a: number[], b: number[], c: number[], count: number) {\n        if (count === 0) {\n          triangle(a, b, c)\n        } else {\n          const ab = mix(a, b, 0.5)\n          const ac = mix(a, c, 0.5)\n          const bc = mix(b, c, 0.5)\n\n          count -= 1\n\n          divideTriangle(a, ab, ac, count)\n          divideTriangle(c, ac, bc, count)\n          divideTriangle(b, bc, ab, count)\n        }\n      }\n\n      divideTriangle(vertices[0], vertices[1], vertices[2], numTimesDivide)\n      // 创建缓冲区\n      const buffer = gl.createBuffer()\n\n      // gl.ARRAY_BUFFER 表示是顶点数据，现在绑定 buffer 为当前缓冲区\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n\n      // 将数据发送到 GPU 缓存\n      gl.bufferData(gl.ARRAY_BUFFER, flatten(points), gl.STATIC_DRAW)\n    }\n    function render() {\n      gl.clear(gl.COLOR_BUFFER_BIT)\n      gl.drawArrays(gl.TRIANGLES, 0, pointsCount)\n    }\n    function loaderProgram() {\n      const program = createProgram(\n        gl,\n        [\n          createShader(gl, vertex, gl.VERTEX_SHADER),\n          createShader(gl, frag, gl.FRAGMENT_SHADER)\n        ]\n      )\n      gl.useProgram(program)\n      const vPosition = gl.getAttribLocation(program, 'vPosition')\n      const size = 2 // 定点属性组成数量，必须是 1，2，3 或者 4\n      const type = gl.FLOAT // 数组中每个元素的数据类型\n      const normalized = false // 归一化处理\n      const stride = 0\n      const offset = 0\n      gl.vertexAttribPointer(vPosition, size, type, normalized, stride, offset)\n      gl.enableVertexAttribArray(vPosition)\n    }\n    init()\n    loaderProgram()\n    render()\n  }, [gl])\n  return (\n    <div>\n      <canvas width=\"500px\" height=\"500px\" ref={ref} style={{ backgroundColor: '#fff' }}></canvas>\n    </div>\n  )\n}","import { add, flatten, scale, vec2 } from \"@/common/mv\";\nimport { createProgram, createShader } from \"@/common/shader\";\nimport { useWebGL } from \"@/hooks/useWebGL\";\nimport { useEffect, useRef } from \"react\"\nimport vertex from './shader.vert'\nimport frag from './shader.frag'\n\nexport function Sierpinski() {\n  const ref = useRef<HTMLCanvasElement>(null)\n  const gl = useWebGL(ref)\n  useEffect(() => {\n    if (!gl) {\n      return\n    }\n    const pointsCount = 5000;\n    function init() {\n      const vertices = [\n        vec2(-1.0, -1.0),\n        vec2(0.0, 1.0),\n        vec2(1.0, -1.0)\n      ]\n      const u = scale(0.5, add(vertices[0], vertices[1]))\n      const v = scale(0.5, add(vertices[0], vertices[2]))\n      let p = scale(0.5, add(u, v))\n      const points = [p]\n      for (let i = 1; i <= pointsCount; i++) {\n        const j = Math.floor(Math.random() * 3)\n        p = scale(0.5, add(points[i - 1], vertices[j]))\n        points.push(p)\n      }\n\n      // 创建缓冲区\n      const buffer = gl.createBuffer()\n\n      // gl.ARRAY_BUFFER 表示是顶点数据，现在绑定 buffer 为当前缓冲区\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n\n      // 将数据发送到 GPU 缓存\n      gl.bufferData(gl.ARRAY_BUFFER, flatten(points), gl.STATIC_DRAW)\n    }\n    function render() {\n      gl.clear(gl.COLOR_BUFFER_BIT)\n      gl.drawArrays(gl.POINTS, 0, pointsCount)\n    }\n    function loaderProgram() {\n      const program = createProgram(\n        gl,\n        [\n          createShader(gl, vertex, gl.VERTEX_SHADER),\n          createShader(gl, frag, gl.FRAGMENT_SHADER)\n        ]\n      )\n      gl.useProgram(program)\n      const vPosition = gl.getAttribLocation(program, 'vPosition')\n      const size = 2 // 定点属性组成数量，必须是 1，2，3 或者 4\n      const type = gl.FLOAT // 数组中每个元素的数据类型\n      const normalized = false // 归一化处理\n      const stride = 0\n      const offset = 0\n      gl.vertexAttribPointer(vPosition, size, type, normalized, stride, offset)\n      gl.enableVertexAttribArray(vPosition)\n    }\n    init()\n    loaderProgram()\n    render()\n  }, [gl])\n  return (\n    <div>\n      <canvas width=\"500px\" height=\"500px\" ref={ref} style={{ backgroundColor: '#fff' }}></canvas>\n    </div>\n  )\n}","import { flatten, mix, vec3 } from \"@/common/mv\";\nimport { createProgram, createShader } from \"@/common/shader\";\nimport { useWebGL } from \"@/hooks/useWebGL\";\nimport { useEffect, useRef } from \"react\"\nimport vertex from './shader.vert'\nimport frag from './shader.frag'\n\nexport function Sierpinski() {\n  const ref = useRef<HTMLCanvasElement>(null)\n  const gl = useWebGL(ref)\n  useEffect(() => {\n    if (!gl) {\n      return\n    }\n    const pointsCount = 5000;\n    function init() {\n      const vertices = [\n        vec3(-0.5, -0.5, -0.5),\n        vec3(0.5, -0.5, -0.5),\n        vec3(0.0, 0.5, 0.0),\n        vec3(0.0, -0.5, 0.5)\n      ]\n      const points = [vec3(0.0, 0.0, 0.0)]\n      for (let i = 0; points.length < pointsCount; i++) {\n        const j = Math.floor(Math.random() * 4)\n        points.push(mix(points[i], vertices[j], 0.5))\n      }\n\n      // 创建缓冲区\n      const buffer = gl.createBuffer()\n\n      // gl.ARRAY_BUFFER 表示是顶点数据，现在绑定 buffer 为当前缓冲区\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n\n      // 将数据发送到 GPU 缓存\n      gl.bufferData(gl.ARRAY_BUFFER, flatten(points), gl.STATIC_DRAW)\n    }\n    function render() {\n      gl.clear(gl.COLOR_BUFFER_BIT)\n      gl.drawArrays(gl.POINTS, 0, pointsCount)\n    }\n    function loaderProgram() {\n      const program = createProgram(\n        gl,\n        [\n          createShader(gl, vertex, gl.VERTEX_SHADER),\n          createShader(gl, frag, gl.FRAGMENT_SHADER)\n        ]\n      )\n      gl.useProgram(program)\n      const vPosition = gl.getAttribLocation(program, 'vPosition')\n      const size = 3 // 定点属性组成数量，必须是 1，2，3 或者 4\n      const type = gl.FLOAT // 数组中每个元素的数据类型\n      const normalized = false // 归一化处理\n      const stride = 0\n      const offset = 0\n      gl.vertexAttribPointer(vPosition, size, type, normalized, stride, offset)\n      gl.enableVertexAttribArray(vPosition)\n    }\n    init()\n    loaderProgram()\n    render()\n  }, [gl])\n  return (\n    <div>\n      <canvas width=\"500px\" height=\"500px\" ref={ref} style={{ backgroundColor: '#fff' }}></canvas>\n    </div>  )\n}","import { flatten, mix, vec3 } from \"@/common/mv\";\nimport { createProgram, createShader } from \"@/common/shader\";\nimport { useWebGL } from \"@/hooks/useWebGL\";\nimport { useEffect, useRef } from \"react\"\nimport vertex from './shader.vert'\nimport frag from './shader.frag'\n\nexport function Sierpinski() {\n  const ref = useRef<HTMLCanvasElement>(null)\n  const gl = useWebGL(ref)\n  useEffect(() => {\n    if (!gl) {\n      return\n    }\n    const numTimesDivide = 3\n    const points: number[][] = []\n    const colors: number[][] = []\n    function init() {\n      const vertices = [\n        vec3(0.0000, 0.0000, -1.0000),\n        vec3(0.0000, 0.9428, 0.3333),\n        vec3(-0.8165, -0.4714, 0.3333),\n        vec3(0.8165, -0.4714, 0.3333)\n      ]\n\n      function triangle(a: number[], b: number[], c: number[], color: number) {\n        const baseColor = [\n          vec3(1.0, 0.0, 0.0),\n          vec3(0.0, 1.0, 0.0),\n          vec3(0.0, 0.0, 1.0),\n          vec3(0.0, 0.0, 0.0)\n        ]\n\n        colors.push(baseColor[color])\n        points.push(a)\n        colors.push(baseColor[color])\n        points.push(b)\n        colors.push(baseColor[color])\n        points.push(c)\n      }\n\n      function tetra(a: number[], b: number[], c: number[], d: number[]) {\n        triangle(a, c, b, 0)\n        triangle(a, c, d, 1)\n        triangle(a, b, d, 2)\n        triangle(b, c, d, 3)\n      }\n\n      function divideTriangle(a: number[], b: number[], c: number[], d: number[], count: number) {\n        if (count === 0) {\n          tetra(a, b, c, d)\n        } else {\n          const ab = mix(a, b, 0.5)\n          const ac = mix(a, c, 0.5)\n          const ad = mix(a, d, 0.5)\n          const bc = mix(b, c, 0.5)\n          const bd = mix(b, d, 0.5)\n          const cd = mix(c, d, 0.5)\n\n          count -= 1\n\n          divideTriangle(a, ab, ac, ad, count)\n          divideTriangle(ab, b, bc, bd, count)\n          divideTriangle(ac, bc, c, cd, count)\n          divideTriangle(ad, bd, cd, d, count)\n        }\n      }\n\n      divideTriangle(vertices[0], vertices[1], vertices[2], vertices[3], numTimesDivide)\n\n      gl.enable(gl.DEPTH_TEST)\n    }\n    function render() {\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT)\n      gl.drawArrays(gl.TRIANGLES, 0, points.length)\n    }\n    function loaderProgram() {\n      const program = createProgram(\n        gl,\n        [\n          createShader(gl, vertex, gl.VERTEX_SHADER),\n          createShader(gl, frag, gl.FRAGMENT_SHADER)\n        ]\n      )\n      gl.useProgram(program)\n      const size = 3 // 定点属性组成数量，必须是 1，2，3 或者 4\n      const type = gl.FLOAT // 数组中每个元素的数据类型\n      const normalized = false // 归一化处理\n      const stride = 0\n      const offset = 0\n\n      const cBuffer = gl.createBuffer() // 存储 colors\n      // gl.ARRAY_BUFFER 表示是顶点数据，现在绑定 buffer 为当前缓冲区\n      gl.bindBuffer(gl.ARRAY_BUFFER, cBuffer)\n      gl.bufferData(gl.ARRAY_BUFFER, flatten(colors), gl.STATIC_DRAW)\n\n      const vColor = gl.getAttribLocation(program, 'vColor')\n      gl.vertexAttribPointer(vColor, size, type, normalized, stride, offset)\n      gl.enableVertexAttribArray(vColor)\n\n      // 创建缓冲区\n      const buffer = gl.createBuffer()\n      // 将数据发送到 GPU 缓存\n      gl.bindBuffer(gl.ARRAY_BUFFER, buffer)\n      gl.bufferData(gl.ARRAY_BUFFER, flatten(points), gl.STATIC_DRAW)\n\n      const vPosition = gl.getAttribLocation(program, 'vPosition')\n      gl.vertexAttribPointer(vPosition, size, type, normalized, stride, offset)\n      gl.enableVertexAttribArray(vPosition)\n    }\n    init()\n    loaderProgram()\n    render()\n  }, [gl])\n  return (\n    <div>\n      <canvas width=\"500px\" height=\"500px\" ref={ref} style={{ backgroundColor: '#fff' }}></canvas>\n    </div>\n\n  )\n}","interface WEBGLClass {\n  title: string;\n  path: string;\n}\nexport const WEBGLClasses: WEBGLClass[] = [\n  {\n    title: 'demo',\n    path: '/v-world'\n  },\n  {\n    title: 'demo1',\n    path: '/webgl/class1/demo1'\n  },\n  {\n    title: 'demo2',\n    path: '/webgl/class1/demo2'\n  },\n  {\n    title: 'demo3',\n    path: '/webgl/class1/demo3'\n  },\n  {\n    title: 'demo4',\n    path: '/webgl/class1/demo4'\n  },\n]","import { WEBGLClasses } from \"@/data/webgl-class\";\nimport { Card, H5 } from \"@blueprintjs/core\";\nimport { Link } from \"react-router-dom\";\n\nexport function WEBGLClassesPage() {\n  return (\n    <div className=\"flex-center fill-height\">\n      <Card interactive>\n        <H5>交互式计算机图形学</H5>\n        <p>基于 WebGL 的自顶向下方法（第七版）<br />这有我跟着练习的 demo</p>\n        <ul>\n          {WEBGLClasses.map(cls => (\n            <li key={cls.path}>\n              <Link to={cls.path}>{cls.title}</Link>\n            </li>\n          ))}\n        </ul>\n      </Card>\n    </div>\n  )\n}","import {\n  HashRouter as Router,\n  Switch,\n  Route\n} from 'react-router-dom'\n\nimport App from './App'\nimport { Archive } from './components/archive'\nimport { Article } from './components/article'\nimport { Header } from './components/header'\nimport VWorld from './components/v-world'\nimport { Sierpinski as Class1Demo1 } from './components/webgl/class1/demo1'\nimport { Sierpinski as Class1Demo2 } from './components/webgl/class1/demo2'\nimport { Sierpinski as Class1Demo3 } from './components/webgl/class1/demo3'\nimport { Sierpinski as Class1Demo4 } from './components/webgl/class1/demo4'\nimport { WEBGLClassesPage } from './components/webgl/classes'\nimport { useDark } from './hooks'\n\nexport function RoutesMap() {\n  useDark()\n  return (\n    <Router>\n      <Header />\n      <Switch>\n        <Route exact path=\"/v-world\" component={VWorld} />\n        <Route exact path=\"/webgl/class1/demo4\" component={Class1Demo4} />\n        <Route exact path=\"/webgl/class1/demo3\" component={Class1Demo3} />\n        <Route exact path=\"/webgl/class1/demo2\" component={Class1Demo2} />\n        <Route exact path=\"/webgl/class1/demo1\" component={Class1Demo1} />\n        <Route exact path=\"/webgl\" component={WEBGLClassesPage} />\n        <Route exact path=\"/articles/:id\" render={props => <Article id={props.match.params.id} {...props} />} />\n        <Route exact path=\"/articles\" component={Archive} />\n        <Route path=\"/\" component={App} />\n      </Switch>\n    </Router>\n  )\n}","import { useEffect } from \"react\";\n\nexport function useDark() {\n  useEffect(() => {\n    const listener = (e: MediaQueryListEvent) => {\n      if (!e.matches) {\n        window.document.body.classList.remove('bp3-dark')\n        return\n      }\n      window.document.body.classList.add('bp3-dark')\n    }\n    const media = window.matchMedia('(prefers-color-scheme: dark)')\n    if (media.matches) {\n      window.document.body.classList.add('bp3-dark')\n    } else {\n      window.document.body.classList.remove('bp3-dark')\n    }\n    media.addEventListener('change', listener);\n    return () => {\n      media.removeEventListener('change', listener)\n    }\n  }, [])\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { RoutesMap } from './route';\n\nimport \"@style/theme.scss\"\nimport \"highlight.js/styles/github-dark.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <RoutesMap />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n","module.exports = \"attribute vec4 vPosition;\\nvoid main() {\\n\\tgl_Position = vPosition;\\n}\\n\"","module.exports = \"precision mediump float;\\nvoid main() {\\n\\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\n}\\n\"","module.exports = \"attribute vec4 vPosition;\\nvoid main() {\\n\\tgl_Position = vPosition;\\n}\\n\"","module.exports = \"precision mediump float;\\nvoid main() {\\n\\tgl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);\\n}\\n\"","module.exports = \"attribute vec4 vPosition;\\nvarying vec4 fColor;\\nvoid main() {\\n\\tfColor = vec4((1.0 + vPosition.xyz) / 2.0, 1.0);\\n\\tgl_Position = vPosition;\\n}\\n\"","module.exports = \"precision mediump float;\\nvarying vec4 fColor;\\nvoid main() {\\n\\tgl_FragColor = fColor;\\n}\\n\"","module.exports = \"attribute vec3 vPosition;\\nattribute vec3 vColor;\\nvarying vec4 color;\\nvoid main() {\\n\\tgl_Position = vec4(vPosition, 1.0);\\n\\tcolor = vec4(vColor, 1.0);\\n}\\n\"","module.exports = \"precision mediump float;\\nvarying vec4 color;\\nvoid main() {\\n\\tgl_FragColor = color;\\n}\\n\""],"sourceRoot":""}